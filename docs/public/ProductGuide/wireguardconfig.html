<!--
title: Product Guide - Wireguard
description: Basic Configuration information for integrated Wireguard functionality; Wireguard allows secure tunnels between VeregOS systems and for secure remote access 
published: false
date: 2023-04-14T16:00:29.254Z
tags: 
editor: ckeditor
dateCreated: 2023-04-10T20:02:46.034Z
-->

<h1>WireGuard</h1>
<p>WireGuard is a modern, open-source VPN software and tunnel protocol that provides fast communication, utilizing state-of-the-art cryptography. WireGuard has been integrated into the Verge.io cloud operating system for the implementation of secure tunnels with minimal setup effort. These secure tunnels can be used for both remote user access and site-to-site connectivity. The following outlines the fundamental components of setup; see the&nbsp;</p>
<p><a href="https://yottadoc.ro.verge.io/#help?id=wireguard-examples">WireGuard Examples page</a></p>
<p>&nbsp;for detailed configuration samples.</p>
<h2>Basic Steps to Configure WireGuard</h2>
<h3>Select the Network:</h3>
<ul>
  <li>WireGuard is attached to one Verge.io network; this should be a network that has access to all networks in the system to which the VPN should reach.</li>
</ul>
<h3>Create the WireGuard Interface:</h3>
<ol>
  <li><strong>Navigate to the selected Network.</strong></li>
  <li>Click <strong>WireGuard(VPN)</strong> on the left menu.</li>
  <li>Click <strong>New Interface</strong>.<ul>
      <li><i><strong>Name</strong></i> - a friendly name for the interface.</li>
      <li><i><strong>Description (optional)</strong></i> - can be entered to record additional, free-form text, and administrative information for the interface.</li>
      <li><i><strong>IP Address</strong></i> - defines the IP/network address for the interface. This should be a unique address space that has been specifically set aside for the VPN and will not conflict with addressing on participating Verge.io networks on this system or from peers. For example: if attaching WireGuard to an internal Verge.io network that uses the default addressing of 192.168.0.1/24 and a peer that uses address scheming of 10.10.100.0/24, an address scheme of 192.168.1.0/24 could be used for the WireGuard interface, as it will not intersect with used local or peer addressing.</li>
      <li><i><strong>Listen Port</strong></i> - can typically be left at the standard default WireGuard port, 51820;<ul>
          <li>To avoid any potential conflicts, check to make sure the given port is not in use.</li>
          <li>Be sure peers are configured to connect to the appropriate port.</li>
        </ul>
      </li>
      <li><i><strong>Private Key</strong></i> - field typically left blank to allow for auto-generation of key pair, however, a specific private key can be entered if desired.<ul>
          <li>WireGuard requires base64-encoded public and private keys; an entered private key must be a complete, base64 key.</li>
          <li>The Public key is always system-generated based on the private key that was auto-generated by the system or entered by the user.</li>
        </ul>
      </li>
      <li><i><strong>Endpoint IP (optional)</strong></i> - the external address to which a peer will connect (IP or URL), to be used in auto-generated peer configurations. If left blank, the system will attempt to the proper IP.</li>
    </ul>
  </li>
  <li>Click <strong>Submit</strong> to save the new Interface.</li>
</ol>
<h3>Create Peer Definition(s):</h3>
<ol>
  <li>From the Network Dashboard, click <strong>WireGuard (VPN)</strong> on the left menu.</li>
  <li>Click <strong>New Peer</strong>.<ul>
      <li><strong>Select the appropriate Interface</strong> from the dropdown list.</li>
      <li><i><strong>Name</strong></i> - the name for the peer; use a descriptive name, such as the name of the other location (for site-to-site) or the name of the remote user.</li>
      <li><i><strong>Description(optional)</strong></i> - can be entered to record additional administrative information.</li>
      <li><i><strong>Auto-Generate Peer Configuration</strong></i> (creates a configuration file to be used by remote access users) - can be selected to automatically set most fields and create a configuration file for use on the peer system. *More info at the end of Create Peer Definition instructions.</li>
      <li><i><strong>Endpoint</strong></i> - the external-facing IP or hostname of the peer; the address from which this system would access the peer.</li>
      <li><i><strong>Listen Port</strong></i> - can be left at the standard WireGuard default of 51820, or changed to a different UDP port.</li>
    </ul>
  </li>
</ol>
<p><strong>Notes for using a non-standard port:</strong></p>
<ul>
  <li>To avoid any potential conflicts, check to make sure the given port is not in use.</li>
  <li>Interface configuration must use a matching port.</li>
  <li><i><strong>Peer IP</strong></i> - the IP address that routes the traffic here; typically this is the internal address assigned to the local interface on this peer.</li>
  <li><i><strong>Public Key</strong></i> - the 64base public key from the peer.</li>
  <li><i><strong>Preshared Key (optional)</strong></i> - can be entered to provide an extra layer of security. This allows for symmetrical encryption to be used in addition to the required public-private key pair encryption. If a preshared key is entered here, the same key must be entered in the configuration at the associated peer.</li>
  <li><i><strong>Allowed IPs</strong></i> - one or more IP address segments, in CIDR format (e.g. 192.168.0.1/24; 10.135.12.65/27;10.10.125.9/29); these are source addresses that will be allowed incoming from this peer and to which traffic will be routed for this peer.</li>
  <li><i><strong>Configure Firewall</strong></i> - selection determines auto-configuration of firewall rules:<ul>
      <li><strong>Site-to-Site</strong> - creates firewall rules for a site peer</li>
      <li><strong>Remote user</strong> - creates firewall rules for a remote user peer</li>
      <li><strong>Don't Create Rules</strong> - does not auto-generate any firewall rules; needed firewall configuration must be handled manually.</li>
    </ul>
  </li>
  <li><i><strong>Keepalive</strong></i> - by default this is set to 0 which means that keepalives are disabled. The roaming property of WireGuard typically ensures reliable NAT traversal without the need for NAT to keep sessions open for long; however, for scenarios where it is imperative to keep open a NAT session or stateful firewall indefinitely, a value can be entered to automatically send persistent, authenticated keepalives every x seconds.</li>
  <li><strong>*Auto-generate Peer Configuration</strong>
    <ul>
      <li>Port</li>
      <li>Peer IP</li>
      <li>Public Key</li>
      <li>Preshared Key</li>
      <li>Allowed IPs</li>
      <li>Additionally, the Keepalive value is automatically set to 25.</li>
    </ul>
  </li>
</ul>
<ol>
  <li>Click <strong>Submit</strong> to save the new Peer record.</li>
</ol>
<h3>Apply Rules:</h3>
