<!--
title: API Documentation
description: 
published: true
date: 2022-12-19T16:54:06.293Z
tags: 
editor: ckeditor
dateCreated: 2022-12-19T16:54:06.293Z
-->

<p>API Introduction</p>
<p>The Verge.io system offers an API interface for custom development integration.&nbsp; This document serves to outline use of the API.&nbsp; Detailed information for the API can be found within the Verge.io UI, as a Swagger wiki page; the wiki page is created dynamically and will show a complete listing of Verge.io tables to access.&nbsp;&nbsp;</p>
<h2>Swagger Interface</h2>
<p>Customers can access the inline Swagger documentation by navigating following these steps:</p>
<ol>
  <li><strong>Login </strong>in to any Verge.io system with valid user credentials<strong>&nbsp;</strong></li>
  <li>From the Main Dashboard, click<strong> System </strong>on the left menu.</li>
  <li>Once inside the System Dashboard, at the <strong>bottom left, there is a link to the API documentation.</strong></li>
</ol>
<p>&nbsp;</p>
<ol>
  <li><strong>Click the link to launch the Swagger documentation wiki </strong>(Note: The page may take a couple minutes to load.) The swagger page provides examples of each function, a list of operations for each, and an ability to test each.</li>
</ol>
<p><i><strong>Click an individual table in the line to access options:</strong></i></p>
<figure class="image image_resized" style="width:662px;"><img src="https://lh5.googleusercontent.com/yuq5Ww0rVafiFxZeLf9PwEAvNMrkkRGJ_5AT7rKFfNgLKItQsJyjnPHIqxfsPr_RpK9Ony4DQKHnACsdTyKKmBIvZ-DhEE4RjpaaPGPu2qLIfIH46XsePKZIJhPEzi9_5Qc-zl5IT33Kfna3rcMBB_577SEEis5F5UIH0B8Mz42lQ61YQdRHmMY_O3h3"></figure>
<p><i><strong>Click one of the GET/POST/DELETE/PUT options:</strong></i></p>
<figure class="image image_resized" style="width:662px;"><img src="https://lh4.googleusercontent.com/rjFJMN9kvMIv8uMeMdEQ8MaIf3jFIYQOFVD-FWk7C75--OQAWXIDm68vWYo1j-fldbAVzvXy4cbyC_vvxRv2dwLbri2EFMUIVf2KQcLflHdLueFdZLnVcAVWYIY7qENiTDvSR5Y0n7ABdvo2Tzcj9_6kVRxYfwKRCz_QHO2EjiinNFLvWpu-03UxjrlS"></figure>
<p><i><strong>Specify parameters and click the Execute Button to run the API Command</strong></i></p>
<p><i><strong>&nbsp;This will return the response which includes the response body and header. Also included is a Curl example to be used in your program.</strong></i></p>
<figure class="image image_resized" style="width:662px;"><img src="https://lh5.googleusercontent.com/vIJwr-hSp0sVJVxl3b4miyyaVvZDfxLoJmb92Ulk1rtBW577qPuEjIWp8OFW0Jyg7T-ZXQsTXCpRiqYvad7Gy2qtYdeu_TQwIDDl4Q46AtOXAFSyTlJQTbS-UmNfwOs6oa_SK5I7y9nHt8tnpKD61meUuyqHdQpKnC3swsnd5xgg5XI1pT58HTwwSzoa"></figure>
<h2>Authentication</h2>
<p>The following are ways to pass authentication through the API. Currently, Verge.io offers two methods:&nbsp;</p>
<ol>
  <li>Basic http authentication&nbsp;</li>
  <li>API database table</li>
</ol>
<p>For the basic http authentication, the API is only available through SSL.</p>
<p>For API Database table, this is done by</p>
<ol>
  <li>Passing a database into the table&nbsp;</li>
  <li>The table responds with a token&nbsp;</li>
  <li>That token needs to pass in all subsequent functions in the header&nbsp;</li>
</ol>
<p>To get a login token, developers will need to post to the <strong>/sys/tokens</strong> table for the customer system. As an example, the API URL for a test tenant would be <i><strong>https://systemname.systemdomain.com/api/sys/tokens </strong></i>. Here is an example curl:</p>
<p>curl --header "X-JSON-Non-Compact: 1" --basic --data-ascii '{"login": "USERNAME", "password": "PASSWORD"}' --insecure --request "POST" --header 'Content-Type: application/json' 'https://test.cloud.Verge.io.com/api/sys/tokensâ€™</p>
<p>Here is an example of what would be returned:</p>
<p>&nbsp;&nbsp;{</p>
<p>&nbsp;&nbsp;&nbsp;"location":"\/sys\/tokens\/3a392b14dee80b838e23e4003b7b82d2efcadce9",</p>
<p>&nbsp;&nbsp;&nbsp;"dbpath":"tokens\/3a392b14dee80b838e23e4003b7b82d2efcadce9",</p>
<p>&nbsp;&nbsp;&nbsp;"$row":1,</p>
<p>&nbsp;&nbsp;&nbsp;"$key":"<strong>3a392b14dee80b838e23e4003b7b82d2efcadce9</strong>"</p>
<p>&nbsp;&nbsp;}</p>
<p>Developers would now need to pass the value in "<strong>$key</strong>" in the HTTP header "<strong>x-yottabyte-token</strong>".&nbsp; So in this example a developer would send the following header:</p>
<p>x-yottabyte-token: 3a392b14dee80b838e23e4003b7b82d2efcadce9</p>
<p>To issue a logout for this token/session, the API will need to send a DELETE HTTP Method to <strong>/sys/tokens/3a392b14dee80b838e23e4003b7b82d2efcadce9</strong></p>
<p>Optionally, when sending API requests, developers can pass the header "<strong>X-JSON-Non-Compact: 1</strong>" to have all responses sent back as friendly-spaced JSON.</p>
<h2>API Helper Script</h2>
<p>Developers can request a copy of the "yb-api" script which is a helper used to make API calls.&nbsp; For help and a list of options developers can run "yb-api --help".&nbsp; To run this, connect to a node in your cluster, either directly or through SSH. Then type in the commands there.</p>
<figure class="image image_resized" style="width:538px;"><img src="https://lh5.googleusercontent.com/ojAJAlbu0RLI0JPc5nMBhr9b2jSjyc5nNJ3E2nPPgicSzIaXrRjf82qhReoHdvKLG1RRAQbNf1NBEGB9zJLmst4I4z-rmZ2-aaC7wTyNvgwK2HKR2SHessO7Ls_Ay7ZHqbX2mJzM3f2iin5mIHoIQaOmupywzdryc42yGyx4ck6lqg6IF6fg7kevI7BW"></figure>
<p>Notes regarding yb-api helper script:&nbsp;</p>
<p>The helper "yb-api" script uses wget, which may not automatically be installed on OSX.&nbsp;&nbsp;</p>
<p>The helper "yb-api" script also uses curl on an upload function.</p>
<p><i>The following are example commands using yb-api:&nbsp;</i></p>
<p><strong>Get a list of VMs (the filter will make this query exclude VM snapshots):</strong></p>
<p>yb-api --get --user=admin --server=10.0.0.100 --fields='name,$key,ram,machine#status#status as machine_status' --filter='is_snapshot eq false' /v4/vms</p>
<p><strong>Get a list of VMs Simple Dump (--server, --user, --filter, --fields are optional):</strong></p>
<p>yb-api --get /v4/vms</p>
<p><strong>Get most of the fields, including drives and nics, for VM 1 (this number would be the value of $key that is returned in the above query):</strong></p>
<p>yb-api --get --user=admin --server=10.0.0.100 --fields='most,machine[most,drives[most],nics[most]]' /v4/vms/1</p>
<p><strong>Change the name of VM 1:</strong></p>
<p>yb-api --put='{"name":"NEWNAME"}' --user=admin --server=10.0.0.100 /v4/vms/1</p>
<p><strong>Delete VM 1:</strong></p>
<p>yb-api --delete --user=admin --server=10.0.0.100 --fields='name,$key,ram' /v4/vms/1</p>
<p><strong>Create a new VM:</strong></p>
<p>yb-api --post='{"name":"NEWVM","enabled":true,"description":"test vm","os_family":"linux","cpu_cores":4,"ram":"8192"}' --user=admin --server=10.0.0.100 /v4/vms</p>
<p><strong>Get the VMs database table schema:</strong></p>
<p>yb-api --get --user=admin --server=10.0.0.100 '/v4/vms/$table'</p>
<p><strong>Clone VM 1:</strong></p>
<p>yb-api --get --user=admin --server=10.0.0.100 '/v4/vm_actions' --post='{"vm":1, "action": "clone", "params": {"name": "NEW VM NAME"}}'</p>
<p><strong>Power on VM 1:</strong></p>
<p>yb-api --get --user=admin --server=10.0.0.100 '/v4/vm_actions' --post='{"vm":1, "action": "poweron"}'</p>
<h2>API Basics</h2>
<p><strong>Overview</strong></p>
<p>The yCenter API is <a href="https://en.wikipedia.org/wiki/Representational_state_transfer"><u>RESTlike</u></a>. All API requests must be made over HTTPS and should be authenticated with <a href="https://en.wikipedia.org/wiki/Basic_access_authentication"><u>Basic Access Authentication</u></a>. It is also possible to POST to /api/sys/tokens to create a session and pass that as the header "x-Verge.io-token" which needs to be deleted to log out.</p>
<p><strong>Resources</strong></p>
<p>Below is an example URL used to query a list of machines.</p>
<p><i>Example: https://user1:xxxxxx@server1.verge.io/api/v4/machines?fields=all</i></p>
<figure class="table" style="float:left;">
  <table style="border-bottom:none;border-left:none;border-right:none;border-top:none;">
    <tbody>
      <tr>
        <td style="background-color:#365671;border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">https://</td>
        <td style="background-color:#365671;border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">user</td>
        <td style="background-color:#365671;border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">:</td>
        <td style="background-color:#365671;border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">password</td>
        <td style="background-color:#365671;border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">@</td>
        <td style="background-color:#365671;border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">server</td>
        <td style="background-color:#365671;border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">/api</td>
        <td style="background-color:#365671;border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">/v4/machines</td>
        <td style="background-color:#365671;border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">?</td>
        <td style="background-color:#365671;border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">filter=&amp;fields=all&amp;sort=&amp;limit=</td>
      </tr>
      <tr>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">&nbsp;</td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">User name</td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">&nbsp;</td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">User Password</td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">&nbsp;</td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">Server host name or IP</td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">&nbsp;</td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">Resource location (URI)</td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">&nbsp;</td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">These options are described below</td>
      </tr>
    </tbody>
  </table>
</figure>
<p>&nbsp;</p>
<p><strong>GET Options</strong></p>
<p><a href="https://gitlab.yottabyte.com/yb/yb/wikis/api-get-fields"><strong><u>Fields</u></strong></a></p>
<ul>
  <li><strong>Specify which fields to return in the result set (may also be a view if there is one defined for the table schema)</strong></li>
  <li><strong>all is a view for every field</strong></li>
  <li><strong>most is a view for every field except for argument fields and rows</strong></li>
  <li><strong>summary is the default value and only fields that have 'summary' set to 'true' in their schema will be returned</strong></li>
  <li><i><strong>fields=name,email,enabled,groups[all] as all_groups,collapse(groups[name]) as first_groups_name</strong></i></li>
  <li><strong>field functions:</strong>
    <ul>
      <li><strong>collapse</strong></li>
      <li><strong>datetime</strong></li>
      <li><strong>upper</strong></li>
      <li><strong>lower</strong></li>
      <li><strong>count</strong></li>
      <li><strong>diskspace</strong></li>
      <li><strong>display</strong></li>
      <li><strong>hex</strong></li>
      <li><strong>sha1</strong></li>
      <li><strong>sum</strong></li>
      <li><strong>avg</strong></li>
      <li><strong>min</strong></li>
      <li><strong>max</strong></li>
    </ul>
  </li>
</ul>
<p>&nbsp;</p>
<p><a href="https://gitlab.yottabyte.com/yb/yb/wikis/api-get-filter"><strong><u>Filter</u></strong></a></p>
<ul>
  <li><strong>Filter result set by specified criteria</strong></li>
  <li><strong>Similar to </strong><a href="https://msdn.microsoft.com/en-us/library/gg309461%28v=crm.7%29.aspx#BKMK_filter"><strong>OData</strong></a></li>
  <li><strong>filter=enabled eq true and size gt 1048576</strong></li>
  <li><strong>filter=cputype eq 'qemu' or cputype eq 'kvm'</strong></li>
  <li><strong>When creating a filter a field, it may not be required, make sure it is included in the </strong><a href="https://gitlab.yottabyte.com/yb/yb/wikis/api-basics#fields"><strong>fields</strong></a><strong> list</strong></li>
</ul>
<figure class="table" style="float:left;">
  <table style="border-bottom:none;border-left:none;border-right:none;border-top:none;">
    <tbody>
      <tr>
        <td style="background-color:#365671;border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;">
          <p style="text-align:center;"><strong>Operator</strong></p>
        </td>
        <td style="background-color:#365671;border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;">
          <p style="text-align:center;"><strong>Description</strong></p>
        </td>
      </tr>
      <tr>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;"><i>eq</i></td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">Equal</td>
      </tr>
      <tr>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;"><i>ne</i></td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">Not equal</td>
      </tr>
      <tr>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;"><i>gt</i></td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">Greater than</td>
      </tr>
      <tr>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;"><i>ge</i></td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">Greater than or equal</td>
      </tr>
      <tr>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;"><i>lt</i></td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">Less than</td>
      </tr>
      <tr>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;"><i>le</i></td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">Less than or equal</td>
      </tr>
      <tr>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;"><i>bw</i></td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">Begins with</td>
      </tr>
      <tr>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;"><i>ew</i></td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">Ends with</td>
      </tr>
      <tr>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;"><i>and</i></td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">Logical and</td>
      </tr>
      <tr>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;"><i>or</i></td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">Logical or</td>
      </tr>
      <tr>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;"><i>cs</i></td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">Contains string (case sensitive)</td>
      </tr>
      <tr>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;"><i>ct</i></td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">Contains text (case insensitive)</td>
      </tr>
      <tr>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;"><i>rx</i></td>
        <td style="border-bottom:0.5pt solid #bfbfbf;border-left:0.5pt solid #bfbfbf;border-right:0.5pt solid #bfbfbf;border-top:0.5pt solid #bfbfbf;padding:0pt 5.4pt;vertical-align:top;">Regex match</td>
      </tr>
    </tbody>
  </table>
</figure>
<p><strong>Sort</strong></p>
<ul>
  <li><strong>Sort results by the field specified</strong></li>
  <li><i><strong>sort=+name</strong></i></li>
  <li><i><strong>sort=-id ##</strong></i></li>
</ul>
<p><strong>Limit</strong></p>
<ul>
  <li><strong>(</strong><i><strong>integer</strong></i><strong>) limit result set - value of 0 for unlimited</strong></li>
  <li><strong>limit=</strong><i><strong>1</strong></i></li>
</ul>
<p><strong>Generic HTTP Response Codes</strong></p>
<ul>
  <li><strong>400 - Bad request</strong></li>
  <li><strong>401 - Failed login / login required</strong></li>
  <li><strong>403 - Permission denied</strong></li>
  <li><strong>404 - Row or API doesn't exist</strong></li>
  <li><strong>405 - Not permitted</strong></li>
  <li><strong>409 - Row exists</strong></li>
  <li><strong>422 - Failed validation / Invalid parameter</strong></li>
  <li><strong>500 - Unhandled error code</strong></li>
</ul>
<p><strong>Post Specific</strong></p>
<ul>
  <li><strong>201 â€“ Created row</strong></li>
</ul>
<p><strong>Websocket Specific (Used for VNC/SPICE)</strong></p>
<ul>
  <li><strong>101 â€“ Switching protocol</strong></li>
</ul>
<p><strong>PUT/GET/DELETE</strong></p>
<ul>
  <li><strong>200 â€“ Success</strong></li>
</ul>
<h2>Schema Table Definitions&nbsp;</h2>
<h3><strong>Field types:&nbsp;</strong></h3>
<ul>
  <li><strong>bool</strong></li>
  <li><strong>text</strong></li>
  <li><strong>string</strong></li>
  <li><strong>num</strong></li>
  <li><strong>uint8</strong></li>
  <li><strong>uint16</strong></li>
  <li><strong>uint32</strong></li>
  <li><strong>uint64</strong></li>
  <li><strong>int8</strong></li>
  <li><strong>int16</strong></li>
  <li><strong>int32</strong></li>
  <li><strong>int64</strong></li>
  <li><strong>enabled</strong></li>
  <li><strong>created</strong></li>
  <li><strong>created_ms</strong></li>
  <li><strong>created_us</strong></li>
  <li><strong>modified</strong></li>
  <li><strong>modified_ms</strong></li>
  <li><strong>modified_us</strong></li>
  <li><strong>filename</strong></li>
  <li><strong>filesize</strong></li>
  <li><strong>fileused</strong></li>
  <li><strong>fileallocated</strong></li>
  <li><strong>filemodified</strong></li>
  <li><strong>json</strong></li>
  <li><strong>row</strong></li>
  <li><strong>rows</strong></li>
</ul>
<p><strong>Schema Owner / Parent Field</strong></p>
<ul>
  <li><strong>owner field: if owner field is null then normal permissions apply, if owner field has value then permissions are replaced by a permission check to the owner</strong></li>
  <li><strong>parent field: the permission check is applied to the row itself, and if permissions fail then permissions are also checked on the parent</strong></li>
</ul>
<h2>Full Table Schema</h2>
<p>To retrieve a tableâ€™s schema append <i>$table</i> to the URI:&nbsp;</p>
<p><strong>/api/v4/machines/$table</strong> (replace machines with the table name)</p>
<p>It will ask for your credentials, this does not support your other authentication methods and requires your Verge.io admin credentials.&nbsp;</p>
<figure class="image image_resized" style="width:216px;"><img src="https://lh4.googleusercontent.com/76jOQLokQRmhVFNWZBz_LL27CfFINNTD9zsXmc8A-7oPDY_EF6hcv01Shc3ntAH7rO3O6xHinh0-FPvIfHpGUYocJ1XjItR3_aTi_PAETrasmNfl_kQHHIA-ezUr4Q0xyrXX-ny8XHtsakUpssySHFFiJijJ-KA47aNDlGW0qoiwkUg4nDImXXEnlJz4"></figure>
<p>&nbsp;</p>
<p><strong>Note: </strong>The output is in JSON format. Firefox will display this by default in a nice readable format. For other browsers you may want to output to another program to view the JSON correctly.</p>
<h2>Example Schema</h2>
<p>{<br>&nbsp; &nbsp; "nonpersistent": false, // if true, this table is only stored in memory and will be lost when a node is restarted<br>&nbsp; &nbsp; "keyfield": "id", // the field (specified in 'fields' below) that specifies the unique key/identifier for this row - defaults to $key which uses the row as the key<br>&nbsp; &nbsp; "maxrows": 10000, // maximum row count before an error is given<br>&nbsp; &nbsp; "display_field": "name", // the field that is displayed as a friendly name<br>&nbsp; &nbsp; "mergeable": false, // the table will put instead of post if the unique constraint is met<br>&nbsp; &nbsp; "unique_constraints": [ // array of keys to use as the unique identifier<br>&nbsp; &nbsp; &nbsp; &nbsp; "domain"<br>&nbsp; &nbsp; ],<br>&nbsp; &nbsp; "depends_on": [ // array of tables that must be initialized first before initializing this table<br>&nbsp; &nbsp; &nbsp; &nbsp; "table2"<br>&nbsp; &nbsp; ],<br>&nbsp; &nbsp; "parent": "cluster", // field property that specifies the parent table schema (not required)<br>&nbsp; &nbsp; "fields": { // database fields per row<br>&nbsp; &nbsp; &nbsp; &nbsp; "enabled": {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "type": "bool", // type for true/false<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "default": true // if this field is not specified when the row is created, set the value to 'true'<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;},<br>&nbsp; &nbsp; &nbsp; &nbsp; "domain": {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "type": "domainname", // friendly type of the field (defined by developers, and customizable)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "displayable": true, // should contain only printable characters and should be trimmed<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "trim": true, // is this field trimmed on put/post (implied by displayable)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "lowercase": true, // modify the passed in value to be lowercase<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "uppercase": false, // modify the passed in value to be uppercase<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "display": "Domain", // friendly display name used by UIs<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "regex": "([xX][nN]--)?([a-zA-Z0-9][a-zA-Z0-9_-]{0,61}[a-zA-Z0-9])+(\\.[a-zA-Z0-9][a-zA-Z0-9_-]{0,61}[a-zA-Z0-9])*$", // regex validation<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "required": true, // is field required<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "min": 0, // minimum length for validation<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "max": 256, // maximum length for validation<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "$type": "string" // native type of the field (num, string, bool, row, rows) - this field is generated automatically and cannot be set<br>&nbsp; &nbsp; &nbsp; &nbsp; },<br>&nbsp; &nbsp; &nbsp; &nbsp; "cluster": {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "type": "row", // this field is a pointer to an existing row<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "table": "clusters", // the path to the database row<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "required": true, // is required field<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "display": "Cluster", // friendly display name<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "mergeable": false // this field can merge when unique constraint is met<br>&nbsp; &nbsp; &nbsp; &nbsp; },<br>&nbsp; &nbsp; &nbsp; &nbsp; "size": {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "display": "Size", // friendly display name<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "type": "uint64", // this field is a number<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "normalize": 4096, // round this field down to the nearest multiple of 4096<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "min": 0, // minimum value<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "average": true, // during put, average the previous value with the new value<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "peak": true, // during put, only update if the new value is greater than the previous value<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "sum": true, // during put, add the previous value with the new value<br><br>&nbsp; &nbsp; &nbsp; &nbsp; },<br>&nbsp; &nbsp; &nbsp; &nbsp; "last_update": {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "type": "modified", <i>// developer-defined helper type</i><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "display": "Modified", <i>// friendly display name</i><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "on_rowchange": "set:{$now}", <i>// when this row changes, set the value to variable $now (server defined variable)</i><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "$type": "num"<br>&nbsp; &nbsp; &nbsp; &nbsp; },<br>&nbsp; &nbsp; &nbsp; &nbsp; "status": {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "type": "row",&nbsp; <i>// this field is a pointer to an existing row</i><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "table": "cluster_tier_status", <i>// the path to the existing row</i><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "readonly": true, <i>// this field cannot be changed</i><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "cascade_delete": true, <i>// when this (parent) row is deleted, the reference in cluster_tier_status will also be deleted</i><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "default_only": true, <i>// this field may not be specified through the API</i><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "display_key": "status", <i>// the field 'status' in the row /v4/cluster_tier_status/ID will be used as its friendly/display value</i><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "on_default": "root@postset:cluster_tier_status?tier={$key}" <i>//when the row is created, create/post a new (child) row to cluster_tier_status and set 'tier' equal to the value specified to our $key</i><br>&nbsp; &nbsp; &nbsp; &nbsp; },<br>&nbsp; &nbsp; &nbsp; &nbsp; "logs": {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "type": "rows", <i>// this field points to multiple rows in another table/schema</i><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "table": "logs", <i>// the database table/schema that contains the row list</i><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "tablekey": "owner", <i>// the field in the specified table/schema that points back to this row</i><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "cascade_delete_as_user": true <i>// when this row is deleted, delete all rows that would exist here with the permissions of the user that deleted this row</i><br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; },<br>&nbsp; &nbsp; "type": "rows" <i>// internal use</i><br>}</p>
<h2>Example Errors</h2>
<h3><strong>Example Error from Server (HTTP Code 422)</strong></h3>
<p>{<br>&nbsp; &nbsp; "err": "Validation error on field: 'dhcp_start' - 'fails validation test'"<br>}</p>
<h2>More API help</h2>
<p>For more assistance with setting up and/or using APIâ€™s, contact <a href="mailto:support@verge.io"><u>support@verge.io</u></a>. We will be happy to assist you with more advanced API topics and troubleshooting.</p>
